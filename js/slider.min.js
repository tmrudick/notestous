var Slider=function(){function g(b){h.attr("src",a[b].url);l.text(m(a[b].date))}function m(a){a=a.split("/");return{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"}[+a[0]]+" "+ +a[1]+", "+a[2]}function k(){for(var b=a[0].timestamp,e=a[a.length-1].timestamp-b,n=f.width(),c=0;c<a.length;c++)$('<div class="tick ui-widget-content"></div>').appendTo($("#slider")).css({left:n/e*(a[c].timestamp-b)+"px"});$(window).resize(function(){$("#slider .tick").remove();
k()})}var a=[],l=$("#date"),h=$("#current-image"),f=$("#slider");$.ajax({url:"/photos.json",dataType:"json",success:function(b){for(var e=0;e<b.length;e++)b[e].timestamp=Date.parse(b[e].date),a.push(b[e]);a.sort(function(a,c){return a.timestamp>c.timestamp});k();f.slider({min:a[0].timestamp,max:a[a.length-1].timestamp,value:a[a.length-1].timestamp,slide:function(b,c){for(var d=0;d<a.length-1;d++)if(a[d].timestamp<=c.value&&a[d+1].timestamp>=c.value){c.value-a[d].timestamp<(a[d+1].timestamp-a[d].timestamp)/
2?(f.slider("option","value",a[d].timestamp,c.value),g(d)):(f.slider("option","value",a[d+1].timestamp,c.value),g(d+1));break}return!1}});g(a.length-1);h.css("visibility","visible")},error:function(){alert("error")}})}();